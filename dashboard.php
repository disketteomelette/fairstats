<?php

//     _|_|            _|                        _|                  _|                
//   _|        _|_|_|      _|  _|_|    _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|_|  
// _|_|_|_|  _|    _|  _|  _|_|      _|_|        _|      _|    _|    _|      _|_|      
//   _|      _|    _|  _|  _|            _|_|    _|      _|    _|    _|          _|_|  
//   _|        _|_|_|  _|  _|        _|_|_|        _|_|    _|_|_|      _|_|  _|_|_|     
//                 v. 0.1 alpha - JCRueda.com - github.com/disketteomelette/fairstats
//
//               2024 - LICENCIADO BAJO CREATIVE COMMONS RECONOCIMIENTO
//                          + info: dentro del dashboard
//
//
//  Herramienta: DASHBOARD
//  Descripción: Acceda a este archivo para revisar las estadísticas de visitas
//               almacenadas por el agente.
//

// CDNs de dependencias externas. Puedes guardar estas librerías en tu hosting y linkearlas aquí.
$bootstrapCSS = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css";
$bootstrapJS = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js";
$chartJS = "https://cdn.jsdelivr.net/npm/chart.js";

// Imágenes, strings, constantes...
$imagenNormal = '<img src="data:image/png;base64,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" alt="" />';
$imagenFooter = '<p align="center"><img src="data:image/png;base64,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" alt="" /></p>';
$foot = 'V.0.1 alpha - Estadísticas con respeto al usuario - Por JCRueda.com - github.com/disketteomelette/fairstats';

if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    // SE DETECTA QUE NO HAY PETICIÓN, APARECE VENTANA SELECCIONAR ARCHIVO
    ?>
<!DOCTYPE html>
<html lang="es"><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fairstats</title><link href="<?php echo $bootstrapCSS; ?>" rel="stylesheet">
<style>body{background-color:#0f1012!important}.code-container{background-color:#0f1012;padding:1rem;border-radius:.25rem}</style>
</head><body><div class="container"><div class="bg-dark text-white p-3 mb-4"><?php echo $imagenNormal; ?><h1 class="mt-5 mb-4">Bienvenid@</h1>
<form action="dashboard.php" method="post"><div class="mb-3"><label for="archivo" class="form-label">¿Qué dia deseas analizar?</label>
<select class="form-select" id="archivo" name="archivo"><?php $archivos = glob('visitas/*.txt'); 
foreach ($archivos as $archivo) { 
$nombreArchivo = basename($archivo); 
$archivoBonico = substr(substr($nombreArchivo, strpos($nombreArchivo, "_") + 1), 0, strpos(substr($nombreArchivo, strpos($nombreArchivo, "_") + 1), "."));
echo "<option value=\"$archivo\">$archivoBonico</option>"; 
} ?>
</select></div>
<button type="submit" class="btn btn-primary">Mostrar análisis</button></form><br><hr>
<?php
if (isset($_POST['archivo'])):
     include 'dashboard.php';
endif; 
?>
<h1 class="mt-5 mb-4"><?= ["Donde la analítica y la privacidad se unen", "Minimización de datos por defecto", "Analizar datos y respetar al usuario", "Insights + respeto = Fairstats", "Adiós a las cookies ¡Bienvenido a las estadísticas justas!", "Analizar con inteligencia, proteger con integridad", "Privacidad de serie, insights de calidad", "Decisiones basadas en datos no personales"][array_rand(["Donde la analítica y la privacidad se unen", "Minimización de datos por defecto", "Analizar datos y respetar al usuario", "Insights + respeto = Fairstats", "Adiós a las cookies ¡Bienvenido a las estadísticas justas!", "Analizar con inteligencia, proteger con integridad", "Privacidad de serie, insights de calidad", "Decisiones basadas en datos no personales"])] ?>
</h1>
<p><b>Fairstats</b> es una herramienta de analítica web diseñada para proporcionar información detallada sobre las visitas a un sitio web sin comprometer la privacidad de los usuarios. Permite recoger los datos básicos de visitas sin necesidad de utilizar cookies ni almacenar direcciones IP, pero permitiendo funciones de seguimiento mediante un hash con cifrado no reversible (mediante iteraciones sobre sha256) en las condiciones técnicas actuales.</p> <br>
<h3>Licencia</h3>
</p>Este software ha sido desarrollado por JCRueda.com. El proyecto se regula de acuerdo con los términos de la licencia Creative Commons Atribución (CC BY). Esta licencia permite a los usuarios utilizar el software libremente, incluso modificarlo, siempre que se reconozca la autoría del trabajo original (José Carlos Rueda, jcrueda.com) y se cite el repositorio original: https://github.com/disketteomelette/fairstats</p>. La utilización de este ejercicio de programación por parte de cualquiera implica la exoneración de cualquier tipo de responsabilidad respecto al autor.
<h3 class="mt-5 mb-4">Configurando fairstats</h3>
<p>Fairstats es muy sencillo de configurar si tu aplicación funciona en PHP (Wordpress, Joomla, etc.). Basta con colocar el agente y el dashboard en tu carpeta principal, e inyectar este código en un header o footer: </p> 
<div class="code-container"><code>&lt;?php include "visita.php";?&gt;</code></div><br>
<p>En caso de páginas HTML u otras tecnologías, si tu servidor es Apache puedes añadir la siguiente regla a tu archivo <code>.htaccess</code> para permitir ejecutar scripts PHP en archivos distintos a .php :<div class="code-container"><code>AddType application/x-httpd-php .html</code></div></code></pre></div></div><?php echo $imagenFooter; echo '<p align="center">'.$foot.'</p>';?><script src="<?php echo $bootstrapJS; ?>"></script></body></html>
<?php exit;}
function generarColor($input, $type) { $hash = crc32($input); 
if ($type === 'IP') { $r = $g = ($hash & 0x00FF00) >> 8; $b = ($hash & 0xFF0000) >> 8; } 
elseif ($type === 'URL') { $r = 255; $g = ($hash & 0x00FF00) >> 12; $b = $hash & 0x0000FF; } return "rgb($r, $g, $b)"; }
if (isset($_POST['archivo'])) {
$archivo = $_POST['archivo'];
$fechaArchivo = str_replace('-', '/', substr(explode('_', $archivo)[1], 0, strpos(explode('_', $archivo)[1], '.')));
$lineas = file($archivo);
$totalVisitas = $usuariosRecurrentes= 0;
$horas = array_fill(0, 24, 0);
$dispositivos = ['PC' => 0, 'Móvil' => 0];
$userAgents = $sistemasOperativos = $usuariosUnicos = $visitasPorPagina = [];
foreach ($lineas as $linea) {
$datos = explode(';', $linea);
$paginaVisitada = $datos[2]; 
if (!isset($visitasPorPagina[$paginaVisitada])) { $visitasPorPagina[$paginaVisitada] = 0; } 
$visitasPorPagina[$paginaVisitada]++;
$totalVisitas++;
$hora = explode(':', explode(';', $linea)[1])[0];
$horas[$hora]++;
$dispositivo = $datos[4];
$dispositivos[$dispositivo]++;
$userAgent = explode('#', $datos[3])[0];
if (!isset($userAgents[$userAgent])) { $userAgents[$userAgent] = 0; }
$userAgents[$userAgent]++;
$sistemaOperativo = explode('#', $datos[3])[2]; 
if (!isset($sistemasOperativos[$sistemaOperativo])) { $sistemasOperativos[$sistemaOperativo] = 0; }
$sistemasOperativos[$sistemaOperativo]++;
$ip = $datos[0];
if (!in_array($ip, $usuariosUnicos)) { $usuariosUnicos[] = $ip; } else { $usuariosRecurrentes++; } } }
?>
<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fairstats - <?php echo $fechaArchivo; ?></title><link href="<?php echo $bootstrapCSS; ?>" rel="stylesheet"></head><style> body, h1, h2, h3, h4, h5, h6, p, a, span, div, th, td { color: #fff; } body { background-color: #0f1012 !important; } </style><body><div class="container mt-4"><div class="bg-dark p-3 mb-4"><div class="m-0"><div class="container"> <div class="row"><div class="col"><table class="table"><tbody><tr><?php echo $imagenNormal; ?><td class="text-end"><h4>Informe de visitas<br><?php echo $fechaArchivo; ?></h4></td></tr></tbody></table></div></div></div></div><?php if (isset($archivo)): ?><div class="row mb-4">
<div class="col-md-4"><div class="bg-success p-3 text-center"><h3 class="m-0">Visitas totales</h3><h1 class="m-0"><?php echo $totalVisitas; ?></h1></div></div>
<div class="col-md-4"><div class="bg-secondary p-3 text-center"><h3 class="m-0">Usuarios únicos</h3><h1 class="m-0"><?php echo count(array_unique(array_map(fn($linea) => explode(';', $linea)[0], $lineas))); ?></h1></div></div>
<div class="col-md-4"><div class="bg-primary p-3 text-center"><h3 class="m-0">Media visita/hora</h3><h1 class="m-0"><?php echo number_format($totalVisitas / 24, 2); ?></h1></div></div>
</div>
<div class="row mb-4"><div class="col-md-12"><h3>Visitas por hora del día</h3><canvas id="visitasPorHora" style="max-height: 300px;"></canvas></div></div>
<div class="row mb-4">
<div class="col-md-4"><h3>Dispositivos</h3><canvas id="dispositivos" style="max-height: 300px;"></canvas></div>
<div class="col-md-4"><h3>Compatibilidad navegador</h3><canvas id="userAgents" style="max-height: 300px;"></canvas></div>
<div class="col-md-4"><h3>Sistema Operativo</h3><canvas id="sistemasOperativos" style="max-height: 300px;"></canvas></div>
</div>
<div class="row mb-4"><div class="col-md-12"><h3>Visitas por página</h3><canvas id="visitasPorPagina" style="max-height: 300px;"></canvas></div></div>
<?php endif; ?>
<div class="row mb-4"><div class="col-md-12"><h3>Usuarios Recurrentes</h3><div class="table-responsive "><table class="table">
<thead><tr><th>IP</th><th>Visitas en el día</th></tr></thead>
<tbody><?php
if (isset($_POST['archivo'])) {
$visitasPorIP = array_count_values(array_map(fn($linea) => explode(';', $linea)[0], file($_POST['archivo'])));
foreach ($visitasPorIP as $ip => $visitas) { if ($visitas > 1) echo "<tr><td>" . strtoupper(substr($ip, 0, 5)) . '...' . strtoupper(substr($ip, -5)) . "</td><td>$visitas</td></tr>"; } } ?>
</tbody></table></div></div></div>
<div class="row"><div class="col-md-12"><h3>Listado</h3><div class="table-responsive"><table class="table">
<thead><tr><th>IP</th><th>Hora</th><th>Página</th><th>User Agent</th><th>Dispositivo</th></tr></thead>
<tbody><?php if (isset($lineas)): 
$coloresIP = $coloresURL = []; 
foreach ($lineas as $linea): 
$datos = explode(';', $linea); 
$ip = $datos[0];
$url = $datos[2];
$colorIP = isset($coloresIP[$ip]) ? $coloresIP[$ip] : generarColor($ip, 'IP');
$coloresIP[$ip] = $colorIP; 
$colorURL = isset($coloresURL[$url]) ? $coloresURL[$url] : generarColor($url, 'URL'); 
$coloresURL[$url] = $colorURL; ?>
<tr><td style="color: <?php echo $colorIP; ?>"><?php echo strtoupper(substr($ip, 0, 5)) . strtoupper(substr($ip, -5)); ?></td>
<td><?php echo $datos[1]; ?></td><td style="color: <?php echo $colorURL; ?>"><?php echo $url; ?></td>
<td><?php echo str_replace(array("#", "_"), " ", $datos[3]); ?></td><td><?php echo $datos[4]; ?></td>
</tr><?php endforeach; endif; ?></tbody></table></div></div></div>
<script src="<?php echo $bootstrapJS; ?>"></script>
<script src="<?php echo $chartJS; ?>"></script>
<script>function generateChart(id, type, data, options) { return new Chart(document.getElementById(id), { type: type, data: data, options: options }); }
var horasChart = generateChart('visitasPorHora', 'line', { labels: <?php echo json_encode(array_keys($horas)); ?>, datasets: [{ label: 'Visitas por hora del día', data: <?php echo json_encode(array_values($horas)); ?>, backgroundColor: 'rgba(54, 162, 235, 0.2)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 }] }, { fill: true });
var dispositivosChart = generateChart('dispositivos', 'pie', { labels: ['PC', 'Móvil'], datasets: [{ label: 'Distribución de Dispositivos', data: <?php echo json_encode(array_values($dispositivos)); ?>, backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)'], borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)'], borderWidth: 1 }] }, { scales: { x: { beginAtZero: true } } });
var userAgentsChart = generateChart('userAgents', 'pie', { labels: <?php echo json_encode(array_keys($userAgents)); ?>, datasets: [{ label: 'Distribución por Navegador', data: <?php echo json_encode(array_values($userAgents)); ?>, backgroundColor: 'rgba(255, 206, 86, 0.2)', borderColor: 'rgba(255, 206, 86, 1)', borderWidth: 1 }] }, { scales: { x: { beginAtZero: true } } });
var sistemasOperativosChart = generateChart('sistemasOperativos', 'pie', { labels: <?php echo json_encode(array_keys($sistemasOperativos)); ?>, datasets: [{ label: 'Distribución por Sistema Operativo', data: <?php echo json_encode(array_values($sistemasOperativos)); ?>, backgroundColor: 'rgba(75, 192, 192, 0.2)', borderColor: 'rgba(75, 192, 192, 1)', borderWidth: 1 }] }, { scales: { x: { beginAtZero: true } } });
var visitasPorPaginaChart = generateChart('visitasPorPagina', 'bar', { labels: <?php echo json_encode(array_keys($visitasPorPagina)); ?>, datasets: [{ label: 'Visitas por Página', data: <?php echo json_encode(array_values($visitasPorPagina)); ?>, backgroundColor: 'rgba(255, 159, 64, 0.2)', borderColor: 'rgba(255, 159, 64, 1)', borderWidth: 1 }] }, { indexAxis: 'y', scales: { x: { beginAtZero: true } } });
</script></div><?php echo $imagenFooter; ?><p align="center"><?php echo $foot; ?></p></body></html>